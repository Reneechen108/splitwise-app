{"ast":null,"code":"var _jsxFileName = \"/Users/ruichunchen/splitwise-app/frontend/src/pages/Expenses.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Button, Form, Col, Row, Image, Dropdown, Jumbotron, Container } from 'react-bootstrap';\nimport ActivityInput from '../components/ActivityInput';\nimport Balance from '../components/Balance';\nimport SingleExpense from '../pages/SingleExpense';\nimport logo from '../images/signup.png';\nimport { DB, DB_PIC } from '../constants/DB';\nimport { ActivityContext } from '../contexts/activityContext';\nimport { GroupContext } from '../contexts/groupContext';\nimport { faPen, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Application } from '../components/export';\nimport Picture from '../components/Picture';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Expenses(props) {\n  _s();\n\n  const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  const [display, setDisplay] = useState(\"none\");\n  const [picture, setPicture] = useState();\n  const [name, setName] = useState();\n  const [change, setChange] = useState();\n  const [userInfo, setUserInfo] = useState();\n  const {\n    activities\n  } = useContext(ActivityContext);\n  const {\n    groups\n  } = useContext(GroupContext);\n  const leave_URL = `${DB}/reject`;\n  const update_URL = `${DB}/update`;\n  let pic = `${DB_PIC}/${props.id}/profile.png`;\n  let expenseList = [];\n\n  if (activities && groups) {\n    if (props.no) {\n      expenseList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        children: props.no\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 30\n      }, this));\n    } else {\n      let activity = activities.filter(a => a.G_ID === props.id);\n      activity.map((item, index) => {\n        expenseList.push( /*#__PURE__*/_jsxDEV(ActivityInput, {\n          value: item\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 34\n        }, this));\n      });\n    }\n  }\n\n  expenseList.sort((a, b) => a.props.value.date > b.props.value.date ? -1 : 1);\n\n  function refreshPage() {\n    window.location.reload(false);\n  }\n\n  function leave() {\n    const calculate_URL = `${DB}/calculate`;\n    fetch(calculate_URL, {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: props.id\n      })\n    }).then(res => res.json()).then(result => {\n      let user = result.dataset.filter(u => u.user === localStorage.getItem('authID'));\n\n      if (user[0].total === 0) {\n        console.log(\"leave\");\n        fetch(leave_URL, {\n          method: 'post',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            name: props.name,\n            member: localStorage.getItem('authID')\n          })\n        }).then(res => res.json()).then(result => {\n          console.log(result.dataset);\n        });\n      } else {\n        alert(\"You should pay off all/get pack all the expenses before you leave the group!\");\n      }\n    });\n  }\n\n  function toggleDisplay() {\n    if (display === \"none\") setDisplay(\"display\");else setDisplay(\"none\");\n  }\n\n  const createItem = async newItem => {\n    setPicture(newItem.image);\n    console.log(\"inside createItem\");\n  };\n\n  async function update() {\n    const formData = new FormData();\n    formData.append('name', change);\n    formData.append('id', props.id);\n    formData.append('update', 'update');\n    formData.append('upload', 'group');\n    formData.append('picture', picture);\n    axios({\n      method: \"POST\",\n      url: update_URL,\n      data: formData,\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(response => {\n      console.log(\"response\", response);\n      setTimeout(refreshPage, 1000);\n    });\n  }\n\n  console.log(\"props name\", props.name);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Col, {\n      sm: 6,\n      children: [/*#__PURE__*/_jsxDEV(Jumbotron, {\n        style: {\n          padding: \"10px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              src: pic,\n              style: {\n                width: \"50px\",\n                height: \"50px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [props.name, \" Expenses\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(SingleExpense, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              className: \"ml-3\",\n              onClick: leave,\n              children: \"Leave Group\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [monthNames[new Date().getMonth()], \" \", new Date().getFullYear()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: expenseList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Col, {\n      sm: 3,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"GROUP BALANCES\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Balance, {\n        id: props.id\n      }, Math.random(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"link\",\n        className: \"ml-3\",\n        onClick: toggleDisplay,\n        children: \"Edit...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Application.Group, {\n      display: display,\n      children: [/*#__PURE__*/_jsxDEV(Application.Close, {\n        toggleDisplay: toggleDisplay,\n        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faTimes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-md-center\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(Picture, {\n            createItem: createItem,\n            old: pic\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 8,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Change Group Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: \"My new group name shall be called...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: props.name,\n            onChange: ({\n              target\n            }) => setChange(target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-md-center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: update,\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Expenses, \"E4+W0RcU8vGIk0OKt9EKY4EBUbU=\");\n\n_c = Expenses;\nexport default Expenses;\n\nvar _c;\n\n$RefreshReg$(_c, \"Expenses\");","map":{"version":3,"sources":["/Users/ruichunchen/splitwise-app/frontend/src/pages/Expenses.js"],"names":["React","useState","useContext","useEffect","Button","Form","Col","Row","Image","Dropdown","Jumbotron","Container","ActivityInput","Balance","SingleExpense","logo","DB","DB_PIC","ActivityContext","GroupContext","faPen","faTimes","FontAwesomeIcon","Application","Picture","axios","Expenses","props","monthNames","display","setDisplay","picture","setPicture","name","setName","change","setChange","userInfo","setUserInfo","activities","groups","leave_URL","update_URL","pic","id","expenseList","no","push","activity","filter","a","G_ID","map","item","index","sort","b","value","date","refreshPage","window","location","reload","leave","calculate_URL","fetch","method","headers","body","JSON","stringify","then","res","json","result","user","dataset","u","localStorage","getItem","total","console","log","member","alert","toggleDisplay","createItem","newItem","image","update","formData","FormData","append","url","data","response","setTimeout","padding","width","height","Date","getMonth","getFullYear","Math","random","target"],"mappings":"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","sourcesContent":["import React, {useState,useContext, useEffect}from 'react'\nimport { Button, Form, Col, Row, Image, Dropdown, Jumbotron, Container } from 'react-bootstrap';\nimport ActivityInput from '../components/ActivityInput'\nimport Balance from '../components/Balance'\nimport SingleExpense from '../pages/SingleExpense'\nimport logo from '../images/signup.png'\nimport {DB, DB_PIC} from '../constants/DB'\nimport {ActivityContext} from '../contexts/activityContext'\nimport {GroupContext} from '../contexts/groupContext'\nimport { faPen, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Application } from '../components/export';\nimport Picture from '../components/Picture'\nimport axios from 'axios';\n\nfunction Expenses(props) {\n    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n    ];\n\n    const [display,setDisplay] = useState(\"none\")\n    const [picture,setPicture] = useState()\n    const [name,setName] = useState()\n    const [change,setChange] = useState()\n    const [userInfo, setUserInfo] = useState()\n\n    const {activities} = useContext(ActivityContext)\n    const {groups} = useContext(GroupContext)\n    \n    const leave_URL = `${DB}/reject`\n    const update_URL= `${DB}/update`\n    \n    let pic = `${DB_PIC}/${props.id}/profile.png`\n    let expenseList = [];\n    \n    if(activities && groups){\n        if(props.no){\n            expenseList.push(<div>{props.no}</div>)\n        }else{\n            let activity = activities.filter(a=> a.G_ID === props.id)\n            activity.map((item, index) => {\n                expenseList.push(<ActivityInput value={item} key={index} />)\n            });\n        }\n    }\n\n    expenseList.sort((a, b) => (a.props.value.date > b.props.value.date) ? -1 : 1)\n    \n    function refreshPage() {\n        window.location.reload(false);\n    }\n\n    function leave(){\n        const calculate_URL = `${DB}/calculate`\n        fetch(calculate_URL, {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                id: props.id\n            })\n        }).then(res => res.json()).then(result=>{\n            let user = result.dataset.filter(u=> u.user === localStorage.getItem('authID'))\n            if(user[0].total === 0){\n                console.log(\"leave\");\n                fetch(leave_URL, {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        name: props.name,\n                        member: localStorage.getItem('authID')\n                    })\n                }).then(res => res.json()).then(result=>{\n                    console.log(result.dataset);\n                })\n            }else{\n                alert(\"You should pay off all/get pack all the expenses before you leave the group!\")\n            }\n        })\n    }\n\n    function toggleDisplay(){\n        if(display === \"none\")\n            setDisplay(\"display\")\n        else\n            setDisplay(\"none\")\n    }\n\n    const createItem= async(newItem) => {\n        setPicture(newItem.image)\n        console.log(\"inside createItem\");\n    }\n\n    async function update(){\n        const formData = new FormData();\n        formData.append('name', change);\n        formData.append('id', props.id);\n        formData.append('update', 'update');\n        formData.append('upload','group');\n        formData.append('picture', picture);\n        axios({\n            method: \"POST\",\n            url: update_URL,\n            data: formData,\n            headers: {\n                \"Content-Type\": \"multipart/form-data\"\n            }\n        }).then(response => {\n            console.log(\"response\", response);\n            setTimeout(refreshPage, 1000);\n        });\n    }\n\n    console.log(\"props name\", props.name);\n    return (\n        <>\n        <Col sm={6}>\n            <Jumbotron style={{padding: \"10px\"}}>\n                    <Container>\n                        <Row>   \n                            <Image src={pic} style={{width: \"50px\",height: \"50px\"}} />\n                            <h3>{props.name} Expenses</h3>\n                            <SingleExpense />\n                            <Button variant=\"secondary\" className=\"ml-3\" onClick={leave}>\n                                Leave Group\n                            </Button>\n                        </Row>\n                        <Row>\n                            <h6>{monthNames[new Date().getMonth()]} {new Date().getFullYear()}</h6>\n                        </Row>\n                    </Container>\n                </Jumbotron>\n            <Row>\n                {expenseList}\n            </Row>\n        </Col>\n        <Col sm={3}>\n            <h4>GROUP BALANCES</h4>\n            <Balance id={props.id} key={Math.random()}/>\n            <Button variant=\"link\" className=\"ml-3\" onClick={toggleDisplay}>\n                Edit...\n            </Button>\n        </Col>\n        <Application.Group display = {display}>\n            <Application.Close toggleDisplay={toggleDisplay}><FontAwesomeIcon icon={faTimes} /></Application.Close>\n            <Row className=\"justify-content-md-center\">\n                <Col sm={4}>\n                    <Picture createItem={createItem} old={pic}/>\n                </Col>\n                <Col sm={8}>\n                    <h4>Change Group Information</h4>\n                    <h6>My new group name shall be called...</h6>\n                    <Form.Control type=\"text\" placeholder={props.name} onChange={({target}) => setChange(target.value)}/>\n                </Col>\n            </Row>\n            <Row className=\"justify-content-md-center\">\n                <Button variant=\"danger\" onClick={update}>Save</Button>\n            </Row>\n        </Application.Group>  \n        </>\n    )\n}\n\nexport default Expenses"]},"metadata":{},"sourceType":"module"}