{"ast":null,"code":"var _jsxFileName = \"/Users/ruichunchen/splitwise-app/frontend/src/pages/userauth/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Button, Form, Col, Row } from 'react-bootstrap';\nimport { faPen, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Picture from '../../components/Picture';\nimport { DB } from '../../constants/DB';\nimport Application from '../../components/application/applicaiton';\nimport { UserContext } from '../../contexts/userContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Profile() {\n  _s();\n\n  // const [user, setUser] = useState();\n  // const [username, setUsername] = useState();\n  // const [email, setEmail] = useState();\n  // const [phone, setPhone] = useState();\n  // const [picture, setPicture] = useState();\n  // const [currency, setCurrency] = useState();\n  // const [time, setTime] = useState();\n  // const [language, setLanguage] = useState();\n  const [display, setDisplay] = useState(\"none\");\n  const {\n    user,\n    handleChange,\n    handleUpdate,\n    username,\n    email,\n    phone,\n    currency,\n    time,\n    language\n  } = useContext(UserContext);\n  const getAll_URL = `${DB}/getUser`;\n  const update_URL = `${DB}/update`;\n  const emailID = localStorage.getItem('authEmail');\n  console.log(\"this is user\", user);\n\n  function toggleDisplay() {\n    if (display === \"none\") {\n      setDisplay(\"display\");\n      console.log(\"this is user: \", user);\n    } else setDisplay(\"none\");\n  } // useEffect( ()=>{\n  //     try{\n  //         fetch(getAll_URL, {\n  //             method: 'post',\n  //             headers: {\n  //                 'Accept': 'application/json',\n  //                 'Content-Type': 'application/json'\n  //             },\n  //             body: JSON.stringify({\n  //                 email: emailID\n  //             })\n  //         }).then(res => res.json()).then(result=>{\n  //             setUser(result.dataset)\n  //         })\n  //     }catch(e){\n  //         console.log(e);\n  //     }\n  // },[])\n  // if(user){\n  //     if(user[0].picture)\n  //         setPicture(user[0].picture)\n  //     if(user[0].currency)\n  //         setCurrency(user[0].currency)\n  //     if(user[0].time)\n  //         setTime(user[0].time)\n  //     if(user[0].language)\n  //         setLanguage(user[0].language)\n  //     console.log(\"BEFORE INFO: \", username, email, phone, currency, time, language);\n  // }\n  // function handleUpdate(){\n  //     toggleDisplay();\n  //     console.log(username, email, phone);\n  //     let newInfo = {\n  //         username: username,\n  //         email: email,\n  //         phone: phone\n  //     }\n  //     console.log(\"user[0]\", user[0]);\n  //     console.log(\"newInfo\", newInfo);\n  //     Object.assign(user[0], newInfo)\n  // }\n  // function handleChange(event){\n  //     const value = event.target.value;\n  //     const name = event.target.name;\n  //     console.log(value, name);\n  //     if(name === \"currency\"){\n  //         setCurrency(value);\n  //     }\n  //     if(name === \"time\"){\n  //         setTime(value);\n  //     }\n  //     if(name === \"language\"){\n  //         setLanguage(value);\n  //     }\n  // }\n\n\n  async function updateAll() {\n    try {\n      let res = await fetch(update_URL, {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          username,\n          email: email,\n          phone: phone,\n          currency: currency,\n          time: time,\n          language: language\n        })\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        console.log(result);\n      } else if (result && result.success === false) {\n        alert(result.msg);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  let currencies = [];\n  let times = [];\n  let languages = [];\n  currencies = ['USD', 'CNY'];\n  currencies = currencies.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: item,\n      children: item\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 16\n    }, this);\n  });\n  times = ['GMT-1', 'GMT-2'];\n  times = times.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: item,\n      children: item\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 16\n    }, this);\n  });\n  languages = ['English', 'Chinese'];\n  languages = languages.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: item,\n      children: item\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 16\n    }, this);\n  });\n\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-md-center\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 2,\n          children: /*#__PURE__*/_jsxDEV(Picture, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 2,\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            children: /*#__PURE__*/_jsxDEV(Form.Label, {\n              children: [\"Your name\", /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"link\",\n                onClick: toggleDisplay,\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faPen\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 68\n                }, this), \"Edit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 113\n              }, this), user[0].username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: /*#__PURE__*/_jsxDEV(Form.Label, {\n              children: [\"Your email\", /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"link\",\n                onClick: toggleDisplay,\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faPen\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 68\n                }, this), \"Edit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 113\n              }, this), user[0].email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: /*#__PURE__*/_jsxDEV(Form.Label, {\n              children: [\"Your phone\", /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"link\",\n                onClick: toggleDisplay,\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faPen\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 68\n                }, this), \"Edit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 113\n              }, this), user[0].phone]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 2,\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"exampleForm.ControlSelect1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"currency\",\n              children: \"Your default currency\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"currency\",\n              id: \"currency\",\n              value: currency,\n              className: \"form-control\",\n              onChange: handleChange,\n              children: currencies\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"exampleForm.ControlSelect1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"time\",\n              children: \"Your time zone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"time\",\n              id: \"time\",\n              value: time,\n              className: \"form-control\",\n              onChange: handleChange,\n              children: times\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"exampleForm.ControlSelect1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"language\",\n              children: \"Language\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"language\",\n              id: \"language\",\n              value: language,\n              className: \"form-control\",\n              onChange: handleChange,\n              children: languages\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"danger\",\n        style: {\n          float: \"right\"\n        },\n        onClick: updateAll,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Application.Base, {\n        display: display,\n        children: [/*#__PURE__*/_jsxDEV(Application.Close, {\n          toggleDisplay: toggleDisplay,\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"username\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              value: user[0].username,\n              onChange: handleChange,\n              name: \"username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"email\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"email\",\n              value: user[0].email,\n              onChange: handleChange,\n              name: \"email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"phone\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"tel\",\n              value: user[0].phone,\n              onChange: handleChange,\n              name: \"phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleUpdate,\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 16\n    }, this);\n  }\n}\n\n_s(Profile, \"QaDo8XhAAzBoqYedsvaTDBM4CIA=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/ruichunchen/splitwise-app/frontend/src/pages/userauth/Profile.js"],"names":["React","useEffect","useState","useContext","Button","Form","Col","Row","faPen","faTimes","FontAwesomeIcon","Picture","DB","Application","UserContext","Profile","display","setDisplay","user","handleChange","handleUpdate","username","email","phone","currency","time","language","getAll_URL","update_URL","emailID","localStorage","getItem","console","log","toggleDisplay","updateAll","res","fetch","method","headers","body","JSON","stringify","result","json","success","alert","msg","e","currencies","times","languages","map","item","index","float"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport { Button, Form, Col, Row } from 'react-bootstrap';\nimport { faPen, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Picture from '../../components/Picture'\nimport {DB} from '../../constants/DB'\nimport Application from '../../components/application/applicaiton'\nimport { UserContext } from '../../contexts/userContext';\n\nfunction Profile() {\n    // const [user, setUser] = useState();\n\n    // const [username, setUsername] = useState();\n    // const [email, setEmail] = useState();\n    // const [phone, setPhone] = useState();\n    // const [picture, setPicture] = useState();\n    // const [currency, setCurrency] = useState();\n    // const [time, setTime] = useState();\n    // const [language, setLanguage] = useState();\n    const [display,setDisplay] = useState(\"none\")\n    const {\n        user, \n        handleChange,\n        handleUpdate,\n        username, \n        email, \n        phone, \n        currency, \n        time, \n        language} = useContext(UserContext);\n\n    const getAll_URL= `${DB}/getUser`\n    const update_URL= `${DB}/update`\n    const emailID = localStorage.getItem('authEmail');\n    console.log(\"this is user\", user);\n\n    function toggleDisplay(){\n        if(display === \"none\"){\n            setDisplay(\"display\")\n            console.log(\"this is user: \", user);\n        }\n        else\n            setDisplay(\"none\")\n    }\n\n    // useEffect( ()=>{\n    //     try{\n    //         fetch(getAll_URL, {\n    //             method: 'post',\n    //             headers: {\n    //                 'Accept': 'application/json',\n    //                 'Content-Type': 'application/json'\n    //             },\n    //             body: JSON.stringify({\n    //                 email: emailID\n    //             })\n    //         }).then(res => res.json()).then(result=>{\n    //             setUser(result.dataset)\n    //         })\n    //     }catch(e){\n    //         console.log(e);\n    //     }\n    // },[])\n    // if(user){\n    //     if(user[0].picture)\n    //         setPicture(user[0].picture)\n    //     if(user[0].currency)\n    //         setCurrency(user[0].currency)\n    //     if(user[0].time)\n    //         setTime(user[0].time)\n    //     if(user[0].language)\n    //         setLanguage(user[0].language)\n    //     console.log(\"BEFORE INFO: \", username, email, phone, currency, time, language);\n    // }\n    \n    // function handleUpdate(){\n    //     toggleDisplay();\n    //     console.log(username, email, phone);\n    //     let newInfo = {\n    //         username: username,\n    //         email: email,\n    //         phone: phone\n    //     }\n    //     console.log(\"user[0]\", user[0]);\n    //     console.log(\"newInfo\", newInfo);\n    //     Object.assign(user[0], newInfo)\n    // }\n\n    // function handleChange(event){\n    //     const value = event.target.value;\n    //     const name = event.target.name;\n    //     console.log(value, name);\n    //     if(name === \"currency\"){\n    //         setCurrency(value);\n    //     }\n    //     if(name === \"time\"){\n    //         setTime(value);\n\n    //     }\n    //     if(name === \"language\"){\n    //         setLanguage(value);\n    //     }\n    // }\n    \n    async function updateAll(){\n        try{\n            let res = await fetch(update_URL, {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    username, username,\n                    email: email,\n                    phone: phone,\n                    currency: currency,\n                    time: time,\n                    language: language\n                })\n            });\n            let result = await res.json();\n            if(result && result.success){\n                console.log(result);\n            }else if(result && result.success === false){\n                alert(result.msg);\n            }\n        }catch(e){\n            console.log(e);\n        }\n    \n    }\n    \n    let currencies = []\n    let times = []\n    let languages= []\n    currencies = ['USD', 'CNY'];\n    currencies = currencies.map((item, index) => {\n        return <option value={item} key={index}>{item}</option>\n    });\n    times = ['GMT-1', 'GMT-2'];\n    times = times.map((item, index) => {\n        return <option value={item} key={index}>{item}</option>\n    });\n    languages = ['English', 'Chinese'];\n    languages = languages.map((item, index) => {\n        return <option value={item} key={index}>{item}</option>\n    });\n\n    if(user){\n        return (\n        <>\n        <Row className=\"justify-content-md-center\">\n            <Col sm={2}>\n                <Picture />\n            </Col>\n            <Col sm={2}>\n                <Form.Group>\n                    <Form.Label>\n                    Your name\n                    <Button variant=\"link\" onClick={toggleDisplay}><FontAwesomeIcon icon={faPen} />Edit</Button><br />\n                    {user[0].username}\n                </Form.Label>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Label>\n                    Your email\n                    <Button variant=\"link\" onClick={toggleDisplay}><FontAwesomeIcon icon={faPen} />Edit</Button><br />\n                    {user[0].email}\n                </Form.Label>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Label>\n                    Your phone\n                    <Button variant=\"link\" onClick={toggleDisplay}><FontAwesomeIcon icon={faPen} />Edit</Button><br />\n                    {user[0].phone}\n                </Form.Label>\n                </Form.Group>\n            </Col>\n            <Col sm={2}>\n                <Form.Group controlId=\"exampleForm.ControlSelect1\">\n                    <label htmlFor=\"currency\">Your default currency</label>\n                    <select\n                        name=\"currency\"\n                        id=\"currency\"\n                        value={currency}\n                        className=\"form-control\"\n                        onChange={handleChange}>\n                        {currencies}\n                    </select>\n                </Form.Group>\n                <Form.Group controlId=\"exampleForm.ControlSelect1\">\n                    <label htmlFor=\"time\">Your time zone</label>\n                    <select\n                        name=\"time\"\n                        id=\"time\"\n                        value={time}\n                        className=\"form-control\"\n                        onChange={handleChange}>\n                        {times}\n                    </select>\n                </Form.Group>\n                <Form.Group controlId=\"exampleForm.ControlSelect1\">\n                    <label htmlFor=\"language\">Language</label>\n                    <select\n                        name=\"language\"\n                        id=\"language\"\n                        value={language}\n                        className=\"form-control\"\n                        onChange={handleChange}>\n                        {languages}\n                    </select>\n                </Form.Group>\n            </Col>\n        </Row>\n        <Button variant=\"danger\" style={{float:\"right\"}} onClick={updateAll}>Save</Button>\n\n        <Application.Base display = {display}>\n            <Application.Close toggleDisplay={toggleDisplay}><FontAwesomeIcon icon={faTimes} /></Application.Close>\n            <Form>\n                <Form.Group controlId=\"username\">\n                    <Form.Label>Username</Form.Label>\n                    <Form.Control type=\"text\" value={user[0].username} onChange={handleChange} name=\"username\" />\n                </Form.Group>\n\n                <Form.Group controlId=\"email\">\n                    <Form.Label>Email</Form.Label>\n                    <Form.Control type=\"email\" value={user[0].email} onChange={handleChange} name=\"email\" />\n                </Form.Group>\n\n\n                <Form.Group controlId=\"phone\">\n                    <Form.Label>Phone</Form.Label>\n                    <Form.Control type=\"tel\" value={user[0].phone} onChange={handleChange} name=\"phone\" />\n                </Form.Group>\n\n                <Button variant=\"primary\" onClick={handleUpdate}>\n                    Update\n                </Button>\n            </Form>\n        </Application.Base> \n        </>\n    )\n    }else{\n        return <div>Loading...</div>\n    }\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}